<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Op√©ration : La Grande Vadrouille !</title>
    <style>
        /* CSS INCHANG√â - Il √©tait d√©j√† parfait */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Merriweather:ital,wght@0,400;0,700;1,400&display=swap');
        body { background-color: #3a3025; background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png'); font-family: 'Merriweather', serif; color: #4b3a26; margin: 0; padding: 1em; min-height: 100vh; box-sizing: border-box; }
        .main-container { display: flex; gap: 2em; align-items: flex-start; max-width: 1600px; margin: 0 auto; }
        .map-container { flex: 1; position: sticky; top: 1em; box-shadow: 0 0 20px rgba(0,0,0,0.5); position: relative; }
        .map-image-base { width: 100%; height: auto; display: block; border: 2px solid #5c3c14; border-radius: 5px; }
        .map-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .route-line { fill: none; stroke: #ff0000; stroke-width: 4; stroke-linecap: round; stroke-linejoin: round; stroke-dasharray: 10 5; animation: dash 1s linear infinite; }
        @keyframes dash { to { stroke-dashoffset: -15; } }
        .city-group { cursor: pointer; }
        .city-group-static { cursor: default; }
        .city-dot { fill: #8b0000; stroke: #fff; stroke-width: 1.5; transition: all 0.2s; }
        .city-group:hover .city-dot { r: 12; fill: #ff4500; }
        .city-group.active .city-dot { r: 14; fill: #ff4500; stroke: #ffc700; stroke-width: 3; }
        .city-label { font-family: 'Merriweather', serif; font-size: 14px; fill: #3a3025; font-weight: bold; text-anchor: middle; paint-order: stroke; stroke: #fdf5e6; stroke-width: 3px; pointer-events: none;}
        .parchment { flex: 2; background-color: #fdf5e6; background-image: url('https://i.pinimg.com/originals/67/18/22/671822c2091c1443b35de38010e1a14a.jpg'); background-size: cover; border: 15px solid #8a6a4a; border-image: url('https://i.pinimg.com/originals/b6/a3/13/b6a313554e05c18151322dc131e5055b.png') 40 round; padding: 2em 3em; box-shadow: 0 0 40px rgba(0,0,0,0.7); border-radius: 5px; }
        h1 { font-family: 'Cinzel Decorative', cursive; color: #8b0000; text-align: center; font-size: 2.2em; margin-bottom: 0.5em; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); }
        .intro { font-style: italic; text-align: center; margin-bottom: 2em; font-size: 1.1em; }
        .day-entry { display: none; overflow: auto; }
        .day-entry.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        .placeholder-text { text-align: center; font-style: italic; font-size: 1.5em; color: #967c5e; padding: 4em 0; }
        .placeholder-text.hidden { display: none; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        h2 { font-family: 'Cinzel Decorative', cursive; color: #5c3c14; font-size: 1.6em; margin-bottom: 0.2em; }
        .route { font-style: italic; color: #6a5a44; margin-top: 0; margin-bottom: 1em; font-weight:bold; }
        .missions { display: flex; gap: 2em; flex-wrap: wrap; }
        .mission { flex: 1; min-width: 250px; }
        h3 { font-family: 'Merriweather', serif; font-weight: 700; color: #8b0000; border-bottom: 1px solid #d4c4a3; padding-bottom: 0.3em; margin-top: 0; }
        .trip-image { float: right; max-width: 40%; border-radius: 5px; margin: 0.5em 0 1em 1.5em; border: 3px solid #d4c4a3; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        @media (max-width: 1024px) { .main-container { flex-direction: column; } .map-container { position: static; width: 100%; box-sizing: border-box; } .parchment { padding: 1.5em 2em; } }
        @media (max-width: 768px) { body { padding: 0.5em; } .trip-image { float: none; max-width: 100%; margin: 1em 0; } .parchment { padding: 1em; border-width: 10px; } h1 { font-size: 1.8em; } h2 { font-size: 1.4em; } }
    </style>
</head>
<body>

    <div class="main-container">
        <div class="map-container">
            <img src="Carte.jpg" alt="La carte de notre p√©riple" class="map-image-base">
            <svg id="map-overlay" class="map-overlay" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg"></svg>
        </div>

        <div class="parchment">
            <!-- Tout le contenu HTML du parchemin est identique -->
            <h1>Op√©ration : Grande Vadrouille des Chevaliers Gourmands</h1>
            <p class="intro"><strong>√Ä :</strong> Agente Sp√©ciale Sarah | <strong>De :</strong> Ton P√®re, Scribe Royal | <strong>Sujet :</strong> Notre plan d'invasion du Sud pour cet √©t√© (Mets de l'huile dans l'armure).</p>
            <div id="placeholder" class="placeholder-text active">Clique sur une ville de la carte pour d√©couvrir l'√©tape !</div>

            <div class="day-entry" id="day-1"><h2>Jour 1 : Le Camp de Base des Mousquetaires üè∞</h2><p class="route">Route : Besan√ßon ‚û°Ô∏è P√©rouges (~180 km)</p><img src="perouges.jpg" alt="Ruelle m√©di√©vale de P√©rouges" class="trip-image"><div class="missions"><div class="mission"><h3>La Mission Visuelle</h3><p>On commence par un voyage dans le temps. P√©rouges, c'est un d√©cor de film √† ciel ouvert. On va se balader dans les ruelles pav√©es et dormir dans une auberge de l'√©poque.</p></div><div class="mission"><h3>La Qu√™te du Graal ü•ß</h3><p>Ton objectif : go√ªter la fameuse <strong>Galette de P√©rouges au sucre</strong>. Une sp√©cialit√© simple, secr√®te et d√©licieuse.</p></div></div></div>
            <div class="day-entry" id="day-2"><h2>Jour 2 : Le Nid d'Aigle & le Show Laser ü¶Ö</h2><p class="route">Route : P√©rouges ‚û°Ô∏è Les Baux-de-Provence (~300 km)</p><img src="lesbaux.jpg" alt="Vue sur les Baux-de-Provence" class="trip-image"><div class="missions"><div class="mission"><h3>La Mission Visuelle</h3><p>On grimpe sur un rocher pour explorer les ruines d'un ch√¢teau. Juste en dessous : les <strong>Carri√®res de Lumi√®res</strong>, un show artistique immersif dans une carri√®re. Le choc du m√©di√©val et du moderne !</p></div><div class="mission"><h3>La Qu√™te du Graal ü´í</h3><p>D√©nicher la meilleure <strong>tapenade</strong> et de l'huile d'olive de la r√©gion pour les ap√©ros.</p></div></div></div>
            <div class="day-entry" id="day-3"><h2>Jours 3 & 4 : La Pause du Guerrier √† la Mer üåä</h2><p class="route">Lieu : Palavas-les-Flots & Aigues-Mortes (~90 km)</p><img src="aiguesmortes.jpg" alt="Remparts d'Aigues-Mortes" class="trip-image"><div class="missions"><div class="mission"><h3>La Mission Visuelle</h3><p>Repos chez le Godfather, puis exp√©dition √† <strong>Aigues-Mortes</strong>. On fera le tour des remparts avec une vue incroyable sur les marais salants tout roses !</p></div><div class="mission"><h3>La Qu√™te du Graal üç¶</h3><p>Manger la meilleure glace de Palavas et trouver de la <strong>fleur de sel</strong> rose √† Aigues-Mortes.</p></div></div></div>
            <div class="day-entry" id="day-5"><h2>Jour 5 : La Tranch√©e Diplomatique üïäÔ∏è</h2><p class="route">Lieu : Argel√®s-sur-Mer</p><img src="argeles.jpg" alt="Plage d'Argel√®s" class="trip-image"><div class="missions"><div class="mission"><h3>La Mission Visuelle</h3><p>Op√©ration tactique chez Mamie. On accomplit notre devoir familial avec bravoure et courage.</p></div><div class="mission"><h3>La Qu√™te du Graal üç¨</h3><p>Survivre, et se r√©compenser avec un √©norme pot de rousquilles (les biscuits locaux).</p></div></div></div>
            <div class="day-entry" id="day-6"><h2>Jour 6 : Le Boss Final des Forteresses üê≤</h2><p class="route">Route : Argel√®s ‚û°Ô∏è Carcassonne & Castelnaudary (~120 km)</p><img src="carcassonne.jpg" alt="Cit√© de Carcassonne la nuit" class="trip-image"><div class="missions"><div class="mission"><h3>La Mission Visuelle</h3><p>La r√©compense ! On visite LA plus grande cit√© fortifi√©e d'Europe : <strong>Carcassonne</strong>. C'est le ch√¢teau de Disneyland, mais en vrai et en mille fois plus impressionnant.</p></div><div class="mission"><h3>La Qu√™te du Graal üç≤</h3><p>Juste √† c√¥t√©, √† Castelnaudary, on s'attaque √† la l√©gende : le <strong>VRAI Cassoulet</strong>. Un plat de guerrier pour reprendre des forces.</p></div></div></div>
            <div class="day-entry" id="day-7"><h2>Jour 7 : Le Joyau Cach√© sur sa Falaise ‚ú®</h2><p class="route">Route : Carcassonne ‚û°Ô∏è Saint-Cirq-Lapopie (~180 km)</p><img src="stcirq.jpg" alt="Village de Saint-Cirq-Lapopie" class="trip-image"><div class="missions"><div class="mission"><h3>La Mission Visuelle</h3><p>On d√©couvre un des plus beaux villages de France, litt√©ralement accroch√© √† une falaise. C'est un village d'artistes, notre trouvaille secr√®te.</p></div><div class="mission"><h3>La Qu√™te du Graal üêê</h3><p>D√©nicher un <strong>Cab√©cou</strong>, le petit fromage de ch√®vre local, et du foie gras d'un petit producteur du Quercy.</p></div></div></div>
            <div class="day-entry" id="day-8"><h2>Jour 8 : La Cath√©drale Noire & le Tr√©sor du Roi üëë</h2><p class="route">Route : Saint-Cirq-Lapopie ‚û°Ô∏è Bourges (~350 km)</p><img src="bourges.jpg" alt="Cath√©drale de Bourges" class="trip-image"><div class="missions"><div class="mission"><h3>La Mission Visuelle</h3><p>Surprise ! On d√©couvre <strong>Bourges</strong> et son incroyable cath√©drale gothique. La nuit, un parcours de lumi√®res bleues illumine les maisons m√©di√©vales.</p></div><div class="mission"><h3>La Qu√™te du Graal üßÄ</h3><p>Partir √† la chasse au <strong>Crottin de Chavignol</strong> et go√ªter aux lentilles vertes du Berry.</p></div></div></div>
            <div class="day-entry" id="day-9"><h2>Jour 9 : Le C≈ìur Fort de la Bourgogne ü¶Å</h2><p class="route">Route : Bourges ‚û°Ô∏è Semur-en-Auxois (~170 km)</p><img src="semur.jpg" alt="Les tours de Semur-en-Auxois" class="trip-image"><div class="missions"><div class="mission"><h3>La Mission Visuelle</h3><p>Derni√®re claque m√©di√©vale avant le retour ! On explore <strong>Semur-en-Auxois</strong>, une forteresse sur son rocher de granit rose, avec ses tours massives qui surplombent la rivi√®re. C'est l'√¢me de la Bourgogne !</p></div><div class="mission"><h3>La Qu√™te du Graal üßÄ</h3><p>Mission pour les braves : trouver et go√ªter le fameux <strong>√âpoisses</strong>, le roi des fromages bourguignons. Et pour adoucir le tout, une bo√Æte des c√©l√®bres bonbons √† l'<strong>Anis de Flavigny</strong>.</p></div></div></div>
        </div>
    </div>

<script>
    // =======================================================================
    // === LE SCRIPT DE LA R√âDEMPTION ===
    // =======================================================================
    const cities = [
        { id: 'besancon',    name: 'Besan√ßon',    dayId: null,    x: 450, y: 240, labelOffset: -10 },
        { id: 'perouges',    name: 'P√©rouges',    dayId: 'day-1', x: 420, y: 305, labelOffset: 25  },
        { id: 'lesbaux',     name: 'Les Baux',    dayId: 'day-2', x: 405, y: 450, labelOffset: 25  },
        { id: 'aiguesmortes',name: 'Aigues-M.',   dayId: 'day-3', x: 385, y: 455, labelOffset: 25  },
        { id: 'argeles',     name: 'Argel√®s',     dayId: 'day-5', x: 330, y: 495, labelOffset: 25  },
        { id: 'carcassonne', name: 'Carcassonne', dayId: 'day-6', x: 300, y: 460, labelOffset: 25  },
        { id: 'stcirq',      name: 'St-Cirq',     dayId: 'day-7', x: 275, y: 410, labelOffset: -10 },
        { id: 'bourges',     name: 'Bourges',     dayId: 'day-8', x: 285, y: 255, labelOffset: -10 },
        { id: 'semur',       name: 'Semur-Aux',   dayId: 'day-9', x: 380, y: 230, labelOffset: 25  }
    ];

    const placeholder = document.getElementById('placeholder');

    function showDay(dayId) {
        if (!dayId) return; 

        // Adieu, message d'accueil ! (Version corrig√©e et propre)
        placeholder.classList.remove('active');
        placeholder.classList.add('hidden'); // On ajoute une classe pour le cacher pour de bon.

        // LA CORRECTION CRUCIALE EST ICI :
        // On s'assure de trouver le bon √©l√©ment AVANT de tout cacher.
        const targetDay = document.getElementById(dayId);
        if (!targetDay) {
             console.error("Bug de Mage : Impossible de trouver l'√©tape " + dayId);
             return; // S√©curit√© pour ne pas tout casser si l'ID est mauvais.
        }

        // D'abord, on cache tout.
        document.querySelectorAll('.day-entry').forEach(e => e.classList.remove('active'));
        
        // ENSUITE, on affiche la bonne cible. C'est cet ordre qui garantit que √ßa marche.
        targetDay.classList.add('active');

        // Et enfin, on met le point en √©vidence sur la carte.
        document.querySelectorAll('.city-group, .city-group-static').forEach(c => c.classList.remove('active'));
        const city = cities.find(c => c.dayId === dayId);
        if (city) {
            document.getElementById(`city-group-${city.id}`).classList.add('active');
        }
    }

    function generateMap() {
        const svg = document.getElementById('map-overlay');
        const ns = "http://www.w3.org/2000/svg";
        const routeOrder = ['besancon', 'perouges', 'lesbaux', 'aiguesmortes', 'argeles', 'carcassonne', 'stcirq', 'bourges', 'semur', 'besancon'];
        let points = routeOrder.map(id => { const city = cities.find(c => c.id === id); return city ? `${city.x},${city.y}` : ''; }).join(' ');

        const polyline = document.createElementNS(ns, 'polyline');
        polyline.setAttribute('class', 'route-line');
        polyline.setAttribute('points', points);
        svg.appendChild(polyline);

        cities.forEach(city => {
            const group = document.createElementNS(ns, 'g');
            group.setAttribute('id', `city-group-${city.id}`);
            if (city.dayId) { group.setAttribute('class', 'city-group'); group.onclick = () => showDay(city.dayId); } 
            else { group.setAttribute('class', 'city-group-static'); }
            const dot = document.createElementNS(ns, 'circle');
            dot.setAttribute('class', 'city-dot');
            dot.setAttribute('cx', city.x); dot.setAttribute('cy', city.y); dot.setAttribute('r', 8);
            const label = document.createElementNS(ns, 'text');
            label.setAttribute('class', 'city-label');
            label.setAttribute('x', city.x); label.setAttribute('y', city.y + city.labelOffset);
            label.textContent = city.name;
            group.appendChild(dot);
            group.appendChild(label);
            svg.appendChild(group);
        });
    }

    document.addEventListener('DOMContentLoaded', generateMap);
</script>
</body>
</html>